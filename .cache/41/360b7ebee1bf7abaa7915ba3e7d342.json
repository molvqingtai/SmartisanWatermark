{"id":"FVPG","dependencies":[{"name":"/Users/molvqingtai/Desktop/project/SmartisanWatermark/.babelrc","includedInParent":true,"mtime":1539021763600},{"name":"/Users/molvqingtai/Desktop/project/SmartisanWatermark/package.json","includedInParent":true,"mtime":1539192602036},{"name":"materialize-css","loc":{"line":1,"column":14},"parent":"/Users/molvqingtai/Desktop/project/SmartisanWatermark/src/assets/js/main.js","resolved":"/Users/molvqingtai/Desktop/project/SmartisanWatermark/node_modules/materialize-css/dist/js/materialize.js"},{"name":"tinycolor2","loc":{"line":2,"column":22},"parent":"/Users/molvqingtai/Desktop/project/SmartisanWatermark/src/assets/js/main.js","resolved":"/Users/molvqingtai/Desktop/project/SmartisanWatermark/node_modules/tinycolor2/tinycolor.js"},{"name":"color-thief","loc":{"line":3,"column":23},"parent":"/Users/molvqingtai/Desktop/project/SmartisanWatermark/src/assets/js/main.js","resolved":"/Users/molvqingtai/Desktop/project/SmartisanWatermark/node_modules/color-thief/js/color-thief.js"},{"name":"blueimp-load-image","loc":{"line":4,"column":22},"parent":"/Users/molvqingtai/Desktop/project/SmartisanWatermark/src/assets/js/main.js","resolved":"/Users/molvqingtai/Desktop/project/SmartisanWatermark/node_modules/blueimp-load-image/js/index.js"}],"generated":{"js":"\"use strict\";var e=i(require(\"materialize-css\")),t=i(require(\"tinycolor2\")),n=i(require(\"color-thief\")),l=i(require(\"blueimp-load-image\"));function i(e){return e&&e.__esModule?e:{default:e}}!function(i){var r=document.querySelector(\"#display-img\"),a=document.querySelector(\"#upload-img\"),o=document.querySelector(\"#download-btn\"),c=document.querySelector(\"#icons-btn\");a.addEventListener(\"change\",function(e){s(e.target.files[0])}),r.addEventListener(\"click\",function(e){e.preventDefault(),h(e.currentTarget)}),r.addEventListener(\"touch\",function(e){e.preventDefault(),h(e.currentTarget)});var u,s=(u=null,function(e){e&&(/image\\/\\w+/.test(e.type)?(f(\"start\"),(0,l.default)(e,function(t,n){var l=n.exif;l&&l.get(\"Make\")&&l.get(\"Make\").includes(\"Smartisan\")?d(t,l.get(\"Model\")).then(function(t){var n=e.name.slice(0,e.name.lastIndexOf(\".\"))+\".jpeg\";f(\"end\",!1,{url:t,name:n}),u?(URL.revokeObjectURL(u),u=t):u=t},function(e){f(\"error\",\"EXIF信息错误!\")}):f(\"error\",\"请上传Smartisan相机照片!\")},{orientation:!0,downsamplingRatio:1})):f(\"error\",\"照片格式错误!\"))}),d=function(e,t){var n=document.createElement(\"canvas\"),l=n.getContext(\"2d\"),i=e.width,r=e.height,a=.02*e.width,o=.02*e.width,c=.96*e.width,u=.96*e.height,s=.04*e.width,d=1.04*e.height;return n.width=e.width,n.height=e.height+.1*e.height,new Promise(function(f,h){document.fonts.load(\"100px Smartisan\").then(function(){m(e).then(function(m){l.fillStyle=\"rgb(255,255,255)\",l.fillRect(0,0,n.width,n.height),l.drawImage(e,0,0,i,r,a,o,c,u),l.font=\"700 100px sans-serif,Smartisan\",l.fillStyle=m,l.fillText(\"  Shot on \".concat(t),s,d),n.toBlob(function(e){try{f(URL.createObjectURL(e))}catch(t){h(t)}},\"image/jpeg\",1)})})})},m=function(e){return new Promise(function(l,i){var r=new n.default,a=r.getPalette(e,10);a.unshift(r.getColor(e)),a.forEach(function(e){var n=\"rgb(\".concat(e[0],\",\").concat(e[1],\",\").concat(e[2],\")\");(0,t.default)(n).isDark()?l(n):l(\"rgb(102, 102, 102)\")})})},f=function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=arguments.length>2?arguments[2]:void 0;switch(t){case\"start\":c.firstElementChild.style.display=\"block\",c.lastElementChild.style.display=\"none\",o.innerHTML=\"绘制水印中...\",o.href=\"javascript::void(0);\";break;case\"end\":r.src=o.href=l.url,r.onload=function(){o.download=l.name,c.firstElementChild.style.display=\"none\",c.lastElementChild.style.display=\"block\",o.innerHTML='保存水印照片<i class=\"material-icons\">file_download</i>',o.removeAttribute(\"disabled\")};break;case\"error\":c.firstElementChild.style.display=\"none\",c.lastElementChild.style.display=\"block\",o.innerHTML='保存水印照片<i class=\"material-icons\">file_download</i>',o.setAttribute(\"disabled\",\"disabled\")}n&&e.default.toast({html:n,displayLength:3e3,classes:\"rounded\"}),a.value=\"\"},h=function(e){document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.mozCancelFullScreen&&document.mozCancelFullScreen():e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullScreen?i.navigator.userAgent.toUpperCase().indexOf(\"CHROME\")>=0?e.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT):e.webkitRequestFullScreen():e.mozRequestFullScreen&&e.mozRequestFullScreen()}}(window);","map":null},"hash":"f45a5a5003f528d5fc0c327febc649a6","cacheData":{"env":{}}}